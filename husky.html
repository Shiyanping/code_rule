<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>手摸手带你实践标准的前端规范 | 前端开发规范</title>
    <meta name="description" content="规范前端团队的代码规范">
    <link rel="icon" href="/code_rule/logo.jpg">
    
    <link rel="preload" href="/code_rule/assets/css/0.styles.a9fdda1a.css" as="style"><link rel="preload" href="/code_rule/assets/js/app.bd13b23c.js" as="script"><link rel="preload" href="/code_rule/assets/js/7.eb39c6a5.js" as="script"><link rel="prefetch" href="/code_rule/assets/js/10.a5814865.js"><link rel="prefetch" href="/code_rule/assets/js/2.619fb882.js"><link rel="prefetch" href="/code_rule/assets/js/3.6ca4aad8.js"><link rel="prefetch" href="/code_rule/assets/js/4.4fa1417a.js"><link rel="prefetch" href="/code_rule/assets/js/5.9e523468.js"><link rel="prefetch" href="/code_rule/assets/js/6.27cb6222.js"><link rel="prefetch" href="/code_rule/assets/js/8.7968eb70.js"><link rel="prefetch" href="/code_rule/assets/js/9.f47c7ed6.js">
    <link rel="stylesheet" href="/code_rule/assets/css/0.styles.a9fdda1a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/code_rule/" class="home-link router-link-active"><!----> <span class="site-name">前端开发规范</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://shiyanping.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/Shiyanping/code_rule" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://shiyanping.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/Shiyanping/code_rule" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/code_rule/name_rule.html" class="sidebar-link">命名规范</a></li><li><a href="/code_rule/html.html" class="sidebar-link">HTML 规范</a></li><li><a href="/code_rule/css.html" class="sidebar-link">CSS 规范</a></li><li><a href="/code_rule/javascript.html" class="sidebar-link">JavaScript 规范</a></li><li><a href="/code_rule/eslint.html" class="sidebar-link">Eslint 配置文件</a></li><li><a href="/code_rule/husky.html" class="active sidebar-link">手摸手带你实践标准的前端规范</a></li></ul> </div> <div class="page"> <div class="content"><h2 id="手摸手带你实践标准的前端规范"><a href="#手摸手带你实践标准的前端规范" aria-hidden="true" class="header-anchor">#</a> 手摸手带你实践标准的前端规范</h2> <h3 id="概述"><a href="#概述" aria-hidden="true" class="header-anchor">#</a> 概述</h3> <p>掘金上发了&quot;制定自己团队的前端开发规范&quot;帖子之后，有好多人给我说光写规范可不行，要进行实践，这篇文章就是告诉大家怎么将我们之前写的规范进行实践，光说不练假把式，我们要在项目中强制执行这些规范。</p> <p>主要使用 <code>husky</code>+<code>lint-staged</code>+<code>eslint</code> 对我们的规范进行实践，首先给大家介绍一下这几个工具都是干什么用的。</p> <ul><li><p>eslint：就不多做介绍了，大家应该都知道，我们制定的规范需要用一些配置来实现，这个时候用 eslint 是最好不过的了。</p></li> <li><p>husky：可以用于实各种 <code>Git Hook</code>。这里主要用到 <code>pre-commit</code> 这个 hook，在执行 commit 之前，运行一些自定义操作。</p></li> <li><p>lint-staged：用于对 Git 暂存区中的文件执行代码检测。</p></li></ul> <p>知道了这几个包的作用之后，我们开始来给一个项目实现一套在提交代码之前的 eslint 检测。</p> <h3 id="eslint"><a href="#eslint" aria-hidden="true" class="header-anchor">#</a> ESlint</h3> <p>首先开始配置一下自己的 eslint，大家不要着急，接下来我会放一份纯正的 vue 配置，复制粘贴过来就行，如果是纯 JS、TS、React 的项目，可以根据腾讯的 <a href="https://github.com/AlloyTeam/eslint-config-alloy" target="_blank" rel="noopener noreferrer">eslint-config-alloy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 配置。</p> <p><strong>开始实践吧：</strong></p> <ul><li>进入你的项目中，我这里新建一个项目开始配置</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 要遵循文件夹命名规范</span>
<span class="token function">mkdir</span> eslint_test
<span class="token function">cd</span> eslint_test
<span class="token comment"># 一路回车就行</span>
<span class="token function">npm</span> init
<span class="token comment"># 安装 eslint 和 babel-eslint</span>
<span class="token function">npm</span> i eslint babel-eslint -D
<span class="token comment"># 配置其他的 eslint-config，需要根据说明安装其他依赖</span>
</code></pre></div><ul><li>接着我们在项目的根目录下创建 eslint 的相关文件：</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># eslint 要忽略的文件</span>
<span class="token function">touch</span> .eslintignore
<span class="token comment"># eslint 的规则</span>
<span class="token function">touch</span> .eslintrc.js
</code></pre></div><ul><li>在 <code>.eslintignore</code> 文件中填写 eslint 要过滤的文件</li></ul> <div class="language- extra-class"><pre class="language-text"><code>build/*.js
src/assets
public
dist
</code></pre></div><ul><li>配置 <code>.eslintrc.js</code></li></ul> <p>直接看一下我之前写的<a href="https://juejin.im/post/5d3130be6fb9a07eb74b7621" target="_blank" rel="noopener noreferrer">制定自己团队的前端开发规范之 eslint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，，去 copy 一下我根据制定的 eslint 配置，粘贴到 <code>.eslintrc.js</code> 中即可。</p> <ul><li>接下来我们要配置一下 package.json 里面的执行脚本：</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .js --fix&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>主要是检测 js 代码，然后通过 <code>--fix</code> 把 eslint 能解决的问题都在检测的时候解决掉，比如格式，比如变量合并。</p> <p>OK 了，eslint 的规范我们已经制定完了，接下来就要在 git 提交代码的时候对我们所写的代码进行检测了。</p> <h3 id="husky-lint-staged"><a href="#husky-lint-staged" aria-hidden="true" class="header-anchor">#</a> husky+lint-staged</h3> <p>先安装一下我们需要的 npm 包：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i lint-staged husky -D
</code></pre></div><p>接下来要在 package.json 里面配置一下我们的 git 钩子：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint_test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .js --fix&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pre-commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;src/**/*.{js,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;npm run lint&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;git add&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;babel-eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^10.0.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.2.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>husky 里面定义了 git 的钩子函数，我们主要在 commit 之前进行检查，所以用到了 pre-commit 这个钩子。</p> <p>lint-staged 在 pre-commit 的时候执行，定义了对 git 暂存区中的文件执行的任务，我们这里只对 js 文件做 eslint 的格式化校验。</p> <p>但是这里有个小坑，大家一定要注意一下：</p> <p><strong>因为 pre-commit 这个钩子是需要配合 git 去用的，它主要对文件夹 <code>.git/hooks/pre-commit</code> 文件做手脚，当我们从 git 上拉下来项目时，如果之前没对 hooks 下的文件做修改，那 hooks 下的文件都是以 sample 结尾的，这个时候钩子函数是不起作用的，当我们安装了 husky 之后，husky 会自动对 hooks 下面的文件做修改，当你安装完 husky 之后，再打开 <code>.git/hooks</code> 文件夹，你会发现所有的钩子文件，都会存在一份带有.sample 的，一份不带.sample 的，不带.sample 的文件就是 husky 创建的，这个才会让 git 钩子起作用。所以我们最好是先拉项目，然后再安装 husky，否则可能会导致 husky 失效。如果你是新开发项目，开发完后才提交到 git，开发完之后，你可以先关联 git 仓库，然后重新安装一下 husky 这个包就可以了。</strong></p> <p>这一套配置下来就可以把我们之前制定的前端规范强制执行了，怎么样，你会将这一套用到自己的项目中吗？目前我自己就在用，感觉还是很不错的，可以规避很多细节上的问题，如果你还没用上这一套，那你就需要赶快去实践一下了。</p> <h2 id="开发中代码格式化"><a href="#开发中代码格式化" aria-hidden="true" class="header-anchor">#</a> 开发中代码格式化</h2> <p>上面的主要是在提交代码的时候进行格式化，这样会保证我们远程 git 仓库里面的代码都是统一的，其实本地开发的时候我们可以使用 prettier 进行格式化，也非常好用，支持很多编辑器，可以自行搜索配置。</p> <h2 id="阅读完后两部曲"><a href="#阅读完后两部曲" aria-hidden="true" class="header-anchor">#</a> 阅读完后两部曲</h2> <p>非常感谢各位花时间阅读完，衷心希望各位小伙伴可以花少量的时间帮忙做两件事：</p> <ul><li><p>动动你的手指，帮忙点个 star 吧，你的点赞是对我最大的动力。</p></li> <li><p>希望各位关注一下我的公众号，新的文章第一时间发到公众号，公众号主要发一些个人随笔、读书笔记、还有一些技术热点和实时热点，并且还有非常吸引人的我个人自费抽奖活动哦~</p></li></ul> <p><img src="https://user-gold-cdn.xitu.io/2019/7/16/16bfa1cb0db942ad?w=2800&h=800&f=jpeg&s=152910" alt></p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Shiyanping/code_rule/edit/vuepress/docs/husky.md" target="_blank" rel="noopener noreferrer">欢迎大家来补充</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">8/8/2019, 10:32:03 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/code_rule/eslint.html" class="prev">
          Eslint 配置文件
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/code_rule/assets/js/app.bd13b23c.js" defer></script><script src="/code_rule/assets/js/7.eb39c6a5.js" defer></script>
  </body>
</html>
