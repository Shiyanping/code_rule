(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{171:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("p",[t._v('掘金上发了"制定自己团队的前端开发规范"帖子之后，有好多人给我说光写规范可不行，要进行实践，这篇文章就是告诉大家怎么将我们之前写的规范进行实践，光说不练假把式，我们要在项目中强制执行这些规范。')]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("知道了这几个包的作用之后，我们开始来给一个项目实现一套在提交代码之前的 eslint 检测。")]),t._v(" "),t._m(4),t._v(" "),e("p",[t._v("首先开始配置一下自己的 eslint，大家不要着急，接下来我会放一份纯正的 vue 配置，复制粘贴过来就行，如果是纯 JS、TS、React 的项目，可以根据腾讯的 "),e("a",{attrs:{href:"https://github.com/AlloyTeam/eslint-config-alloy",target:"_blank",rel:"noopener noreferrer"}},[t._v("eslint-config-alloy"),e("OutboundLink")],1),t._v(" 配置。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._m(12),t._v(" "),e("p",[t._v("直接看一下我之前写的"),e("a",{attrs:{href:"https://juejin.im/post/5d3130be6fb9a07eb74b7621",target:"_blank",rel:"noopener noreferrer"}},[t._v("制定自己团队的前端开发规范之 eslint"),e("OutboundLink")],1),t._v("，，去 copy 一下我根据制定的 eslint 配置，粘贴到 "),e("code",[t._v(".eslintrc.js")]),t._v(" 中即可。")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),e("p",[t._v("OK 了，eslint 的规范我们已经制定完了，接下来就要在 git 提交代码的时候对我们所写的代码进行检测了。")]),t._v(" "),t._m(16),t._v(" "),e("p",[t._v("先安装一下我们需要的 npm 包：")]),t._v(" "),t._m(17),e("p",[t._v("接下来要在 package.json 里面配置一下我们的 git 钩子：")]),t._v(" "),t._m(18),e("p",[t._v("husky 里面定义了 git 的钩子函数，我们主要在 commit 之前进行检查，所以用到了 pre-commit 这个钩子。")]),t._v(" "),e("p",[t._v("lint-staged 在 pre-commit 的时候执行，定义了对 git 暂存区中的文件执行的任务，我们这里只对 js 文件做 eslint 的格式化校验。")]),t._v(" "),e("p",[t._v("但是这里有个小坑，大家一定要注意一下：")]),t._v(" "),t._m(19),t._v(" "),e("p",[t._v("这一套配置下来就可以把我们之前制定的前端规范强制执行了，怎么样，你会将这一套用到自己的项目中吗？目前我自己就在用，感觉还是很不错的，可以规避很多细节上的问题，如果你还没用上这一套，那你就需要赶快去实践一下了。")]),t._v(" "),t._m(20),t._v(" "),e("p",[t._v("上面的主要是在提交代码的时候进行格式化，这样会保证我们远程 git 仓库里面的代码都是统一的，其实本地开发的时候我们可以使用 prettier 进行格式化，也非常好用，支持很多编辑器，可以自行搜索配置。")]),t._v(" "),t._m(21),t._v(" "),e("p",[t._v("非常感谢各位花时间阅读完，衷心希望各位小伙伴可以花少量的时间帮忙做两件事：")]),t._v(" "),t._m(22),t._v(" "),t._m(23)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"手摸手带你实践标准的前端规范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#手摸手带你实践标准的前端规范","aria-hidden":"true"}},[this._v("#")]),this._v(" 手摸手带你实践标准的前端规范")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[this._v("#")]),this._v(" 概述")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("主要使用 "),s("code",[this._v("husky")]),this._v("+"),s("code",[this._v("lint-staged")]),this._v("+"),s("code",[this._v("eslint")]),this._v(" 对我们的规范进行实践，首先给大家介绍一下这几个工具都是干什么用的。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[e("p",[t._v("eslint：就不多做介绍了，大家应该都知道，我们制定的规范需要用一些配置来实现，这个时候用 eslint 是最好不过的了。")])]),t._v(" "),e("li",[e("p",[t._v("husky：可以用于实各种 "),e("code",[t._v("Git Hook")]),t._v("。这里主要用到 "),e("code",[t._v("pre-commit")]),t._v(" 这个 hook，在执行 commit 之前，运行一些自定义操作。")])]),t._v(" "),e("li",[e("p",[t._v("lint-staged：用于对 Git 暂存区中的文件执行代码检测。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"eslint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eslint","aria-hidden":"true"}},[this._v("#")]),this._v(" ESlint")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("开始实践吧：")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("进入你的项目中，我这里新建一个项目开始配置")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要遵循文件夹命名规范")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" eslint_test\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" eslint_test\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一路回车就行")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 eslint 和 babel-eslint")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i eslint babel-eslint -D\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置其他的 eslint-config，需要根据说明安装其他依赖")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("接着我们在项目的根目录下创建 eslint 的相关文件：")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# eslint 要忽略的文件")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" .eslintignore\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# eslint 的规则")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" .eslintrc.js\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("在 "),s("code",[this._v(".eslintignore")]),this._v(" 文件中填写 eslint 要过滤的文件")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("build/*.js\nsrc/assets\npublic\ndist\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("配置 "),s("code",[this._v(".eslintrc.js")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("接下来我们要配置一下 package.json 里面的执行脚本：")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --ext .js --fix"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("主要是检测 js 代码，然后通过 "),s("code",[this._v("--fix")]),this._v(" 把 eslint 能解决的问题都在检测的时候解决掉，比如格式，比如变量合并。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"husky-lint-staged"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#husky-lint-staged","aria-hidden":"true"}},[this._v("#")]),this._v(" husky+lint-staged")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("npm")]),this._v(" i lint-staged husky -D\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint_test"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint --ext .js --fix"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hooks"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint-staged"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src/**/*.{js,vue}"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git add"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"author"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"license"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ISC"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"devDependencies"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"babel-eslint"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^10.0.2"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"eslint"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^6.1.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.0.1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^9.2.1"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("因为 pre-commit 这个钩子是需要配合 git 去用的，它主要对文件夹 "),s("code",[this._v(".git/hooks/pre-commit")]),this._v(" 文件做手脚，当我们从 git 上拉下来项目时，如果之前没对 hooks 下的文件做修改，那 hooks 下的文件都是以 sample 结尾的，这个时候钩子函数是不起作用的，当我们安装了 husky 之后，husky 会自动对 hooks 下面的文件做修改，当你安装完 husky 之后，再打开 "),s("code",[this._v(".git/hooks")]),this._v(" 文件夹，你会发现所有的钩子文件，都会存在一份带有.sample 的，一份不带.sample 的，不带.sample 的文件就是 husky 创建的，这个才会让 git 钩子起作用。所以我们最好是先拉项目，然后再安装 husky，否则可能会导致 husky 失效。如果你是新开发项目，开发完后才提交到 git，开发完之后，你可以先关联 git 仓库，然后重新安装一下 husky 这个包就可以了。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"开发中代码格式化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发中代码格式化","aria-hidden":"true"}},[this._v("#")]),this._v(" 开发中代码格式化")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"阅读完后两部曲"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#阅读完后两部曲","aria-hidden":"true"}},[this._v("#")]),this._v(" 阅读完后两部曲")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v("动动你的手指，帮忙点个 star 吧，你的点赞是对我最大的动力。")])]),this._v(" "),s("li",[s("p",[this._v("希望各位关注一下我的公众号，新的文章第一时间发到公众号，公众号主要发一些个人随笔、读书笔记、还有一些技术热点和实时热点，并且还有非常吸引人的我个人自费抽奖活动哦~")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/7/16/16bfa1cb0db942ad?w=2800&h=800&f=jpeg&s=152910",alt:""}})])}],!1,null,null,null);s.default=n.exports}}]);